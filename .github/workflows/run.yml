name: Esegui Scraper Schedulato

on:
  # Rimuovi temporaneamente 'schedule' o lascialo, ma usa 'workflow_dispatch'
  # schedule: 
  #   - cron: '0 8 * * *' 
  workflow_dispatch:

jobs:
  run_scraper:
    runs-on: ubuntu-latest
    timeout-minutes: 15 # Aumenta il timeout se lo scraping Ã¨ lungo

    steps:
    - uses: actions/checkout@v4

    # 1. Configurazione Python
    - name: Set up Python 3.11
      uses: actions/setup-python@v5
      with:
        python-version: '3.11'

    # 2. Installazione delle dipendenze Python (Playwright, Pillow, etc.)
    - name: Install dependencies
      run: |
        pip install -r requirements.txt
        # Questo installa i browser necessari per Playwright nel runner
        playwright install chromium 
        
    # 3. Esecuzione dello script adattato
    - name: Run Python Scraper
      run: python run.py
      
    # 4. Carica i risultati (immagini) come artefatti di GitHub (OPZIONALE ma CONSIGLIATO)
    # Senza l'upload a Drive, questo ti permette di scaricare gli screenshot generati
    - uses: actions/upload-artifact@v4
      with:
        name: screenshots-${{ github.sha }}
        path: |
          sosfanta_*.png
          fantacalcio_*.png
          gazzetta_*.png
